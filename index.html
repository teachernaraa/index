
<script>
  function redirectToSite(token) {
    const nonce = Math.random().toString(36).substr(2, 10); // üé≤ —Å–∞–Ω–∞–º—Å–∞—Ä–≥“Ø–π nonce
    const cbName = "cb_" + Date.now();

    window[cbName] = function(response) {
      if (response.status === "ok") {
        window.location.href = response.url;
      } else {
        alert("‚ùå Error: " + response.msg);
      }
    };

    const script = document.createElement("script");
    script.src = "https://script.google.com/macros/s/AKfycbzm0SwI_b9bhyZDFWSFYdJ_-eM3pObAdcouKD4-fP6pKiob1p53XYQPO4OrkaDMy5jBNw/exec"
      + "?key=" + encodeURIComponent(token)
      + "&nonce=" + encodeURIComponent(nonce)
      + "&callback=" + cbName;

    document.body.appendChild(script);
  }

  // NFC ‚Üí –ª–∏–Ω–∫ –¥—ç—ç—Ä key=token1 –≥—ç–∂ —É–Ω—à–∏—Ö–∞–¥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä –∞–∂–∏–ª–ª—É—É–ª–Ω–∞
  const urlParams = new URLSearchParams(window.location.search);
  const token = urlParams.get("key");
  if (token) {
    redirectToSite(token);
  }
</script>
