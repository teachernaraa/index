<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <title>NFC Redirect</title>
  <script>
    function handleResponse(response) {
      console.log("Response:", response); // Debug —Ö–∞—Ä—É—É–ª–∞—Ö–∞–¥
      if (response.status === "ok") {
        if (response.redirect) {
          // –®—É—É–¥ –∑–∞–∞—Å–∞–Ω –ª–∏–Ω–∫ —Ä“Ø“Ø —à–∏–ª–∂“Ø“Ø–ª–Ω—ç
          window.location.href = response.redirect;
        } else {
          document.body.innerHTML = "<h3>‚ö†Ô∏è Redirect –ª–∏–Ω–∫ –∞–ª–≥–∞</h3>";
        }
      } else {
        document.body.innerHTML = "<h3>‚ùå –ê–ª–¥–∞–∞: " + response.message + "</h3>";
      }
    }

    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      const key = params.get("key");
      if (!key) {
        document.body.innerHTML = "<h3>‚ö†Ô∏è Token –æ—Ä—É—É–ª–∞–∞–≥“Ø–π –±–∞–π–Ω–∞</h3>";
        return;
      }

      const script = document.createElement("script");
      script.src = "https://script.google.com/macros/s/AKfycbzTA7f0NX3QdQmoe6Nm16UuW0sfNPpcDQRrJcSr6uIxA4M4o57nQo9Jw_oC7Owqr62slQ/exec"
                  + "?key=" + encodeURIComponent(key)
                  + "&callback=handleResponse";
      document.body.appendChild(script);
    };
  </script>
</head>
<body>
  <h3>üîÑ –®–∞–ª–≥–∞–∞–¥ –±–∞–π–Ω–∞...</h3>
</body>
</html>
